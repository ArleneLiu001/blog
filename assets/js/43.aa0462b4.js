(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{387:function(t,a,v){"use strict";v.r(a);var _=v(18),s=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"微信小程序兼容企业微信小程序分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序兼容企业微信小程序分析"}},[t._v("#")]),t._v(" 微信小程序兼容企业微信小程序分析")]),t._v(" "),a("h3",{attrs:{id:"一-将微信小程序用到企业微信里面可行性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-将微信小程序用到企业微信里面可行性"}},[t._v("#")]),t._v(" 一，将微信小程序用到企业微信里面可行性：")]),t._v(" "),a("p",[t._v("可以。企业微信移动客户端从2.5.8版本开始，已内置微信小程序基础库，开发者仅需做一些适配工作，即可将微信小程序移植到企业微信上运行。")]),t._v(" "),a("h3",{attrs:{id:"二-明确需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-明确需求"}},[t._v("#")]),t._v(" 二，明确需求：")]),t._v(" "),a("ol",[a("li",[t._v("针对只需企业内部员工使用的小程序，属于企业内部开发，参考企业微信官方企业内部开发文档。")]),t._v(" "),a("li",[t._v("需放到企业微信应用市场，供其他企业搜索到并安装使用时，属于第三方应用，开发时参考企业微信第三方应用开发文档。")])]),t._v(" "),a("h3",{attrs:{id:"三-企业微信小程序开发工具以及体验版本设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三-企业微信小程序开发工具以及体验版本设置"}},[t._v("#")]),t._v(" 三，企业微信小程序开发工具以及体验版本设置：")]),t._v(" "),a("p",[t._v("企业微信小程序的开发通过微信小程序模拟器插件来实现。")]),t._v(" "),a("p",[t._v("开发工具：使用微信开发工具----\x3e安装企业微信开发插件---\x3e切换企业微信小程序模式即可进行开发。")]),t._v(" "),a("p",[t._v("参考文档：\nhttps://work.weixin.qq.com/api/doc/90000/90136/92380")]),t._v(" "),a("p",[t._v("体验版本设置：在开发工具里面扫码体验--\x3e使用企业微信扫描二维码打开小程序开发版--\x3e配置体验版--\x3e选择体验成员后，发送体验邀请。")]),t._v(" "),a("p",[t._v("参考文档：https://work.weixin.qq.com/api/doc/90000/90136/92380")]),t._v(" "),a("h3",{attrs:{id:"四-企业微信小程序开发流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四-企业微信小程序开发流程"}},[t._v("#")]),t._v(" 四，企业微信小程序开发流程：")]),t._v(" "),a("ol",[a("li",[t._v("微信公众平台注册小程序帐号")]),t._v(" "),a("li",[t._v("开发者在开发者工具环境完成开发调试，同时可使用企业微信的专有接口做针对性的开发。")]),t._v(" "),a("li",[t._v("提交小程序审核并发布")]),t._v(" "),a("li",[t._v("小程序关联到第三方应用或者小程序关联到企业微信")])]),t._v(" "),a("p",[t._v("前三条通用，和微信小程序开发过程一致。\n根据使用范围的不同，企业微信小程序有两种关联方式。")]),t._v(" "),a("h5",{attrs:{id:"针对只需企业内部员工使用时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对只需企业内部员工使用时"}},[t._v("#")]),t._v(" 针对只需企业内部员工使用时：")]),t._v(" "),a("ol",[a("li",[t._v("可前往企业微信管理后台-进入应用与小程序-小程序-关联小程序 详情")]),t._v(" "),a("li",[t._v("登录小程序管理后台-设置tab-关联设置，找到关联到企业微信-前往关联的入口。")])]),t._v(" "),a("p",[t._v("参考文档：https://work.weixin.qq.com/api/doc/90000/90136/92370")]),t._v(" "),a("h5",{attrs:{id:"需放到企业微信应用市场-供其他企业使用时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需放到企业微信应用市场-供其他企业使用时"}},[t._v("#")]),t._v(" 需放到企业微信应用市场，供其他企业使用时：")]),t._v(" "),a("ol",[a("li",[t._v("申请成为第三方服务商：入口：https://open.work.weixin.qq.com/")]),t._v(" "),a("li",[t._v("服务商登录第三方管理系统->应用管理->小程序->关联小程序，即可将小程序关联到第三方应用")])]),t._v(" "),a("p",[t._v("参考文档：https://work.weixin.qq.com/api/doc/90001/90144/92425")]),t._v(" "),a("h3",{attrs:{id:"五-兼容问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五-兼容问题"}},[t._v("#")]),t._v(" 五，兼容问题：")]),t._v(" "),a("h4",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明：")]),t._v(" "),a("ol",[a("li",[t._v("小程序在微信环境中运行时，不支持调用企业微信专有接口，需要进行对应的兼容处理。")]),t._v(" "),a("li",[t._v("由于平台有差异性，微信小程序运行到企业微信，会有一定适配工作；")])]),t._v(" "),a("h4",{attrs:{id:"平台差异性适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#平台差异性适配"}},[t._v("#")]),t._v(" 平台差异性适配：")]),t._v(" "),a("h5",{attrs:{id:"账号体系适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#账号体系适配"}},[t._v("#")]),t._v(" 账号体系适配：")]),t._v(" "),a("h6",{attrs:{id:"身份识别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#身份识别"}},[t._v("#")]),t._v(" 身份识别：")]),t._v(" "),a("p",[t._v("微信端---通过登录接口获取个人用户的身份信息。 通过获取用户的openid来唯一标识一个用户。\n企业微信端---通过登录接口获取当前企业的员工身份信息。通过获取用户的userid来唯一标识一个员工。")]),t._v(" "),a("h6",{attrs:{id:"运行环境区分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行环境区分"}},[t._v("#")]),t._v(" 运行环境区分：")]),t._v(" "),a("p",[t._v("调用异步接口 wx.getSystemInfo 或者同步接口 wx.getSystemInfoSync 获取。在企业微信运行时，会额外返回一个environment字段并赋值为 “wxwork”，在微信里面运行时则不返回该字段。建议开发者在小程序的app.js里面对环境变量进行捕获并作为全局变量进行缓存。")]),t._v(" "),a("h5",{attrs:{id:"api接口适配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api接口适配"}},[t._v("#")]),t._v(" API接口适配：")]),t._v(" "),a("p",[t._v("结合目前优软商城微信小程序的api使用情况，可能需要适配的api有（以下API企业微信小程序不支持）：")]),t._v(" "),a("ol",[a("li",[t._v("动态设置置顶栏文字内容。（wx.setTopBarText()）")]),t._v(" "),a("li",[t._v("延迟一部分操作到下一时间执行。(wx.nextTick())")]),t._v(" "),a("li",[t._v("监听窗口尺寸变化：(wx.onWindowResize())")]),t._v(" "),a("li",[t._v("显示当前页面的转发按钮。(wx.showShareMenu())")])]),t._v(" "),a("h3",{attrs:{id:"六-使用微信小程序开发企业微信小程序-目前发现的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六-使用微信小程序开发企业微信小程序-目前发现的问题"}},[t._v("#")]),t._v(" 六，使用微信小程序开发企业微信小程序，目前发现的问题：")]),t._v(" "),a("h5",{attrs:{id:"组件问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件问题"}},[t._v("#")]),t._v(" 组件问题：")]),t._v(" "),a("ol",[a("li",[t._v("样式中，使用view标签直接定义的样式报错。"),a("br"),t._v("\n包含文件：u-orderBox.vue，u-productListContent.vue，u-modal.vue，u-addCart.vue，mescroll-uni.vue等  。修改建议：将样式中直接使用view来设置的样式改为通过添加类名设置样式。")]),t._v(" "),a("li",[t._v("我的页面：打开公司选择框，点击灰色区域无法关闭。")])]),t._v(" "),a("h5",{attrs:{id:"页面兼容问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面兼容问题"}},[t._v("#")]),t._v(" 页面兼容问题：")]),t._v(" "),a("ol",[a("li",[t._v("购物车页面报错：Q1: 有些字段报‘undefined’或者‘not defined’，需做兼容处理。     Q2: filter过滤器加载异常，导致页面报错。")]),t._v(" "),a("li",[t._v("结算页面报错：1.有些字段报‘undefined’或者‘not defined’，需做兼容处理。")]),t._v(" "),a("li",[t._v("结算方式选择异常。")]),t._v(" "),a("li",[t._v("买卖家页面：涉及在model层标签内的字段做格式处理的情况都会报错，需做兼容。")])]),t._v(" "),a("h5",{attrs:{id:"api兼容问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api兼容问题"}},[t._v("#")]),t._v(" API兼容问题：")]),t._v(" "),a("p",[t._v("1.延迟一部分操作到下一时间执行方法。(wx.nextTick())")]),t._v(" "),a("h5",{attrs:{id:"开发工具问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发工具问题"}},[t._v("#")]),t._v(" 开发工具问题：")]),t._v(" "),a("ol",[a("li",[t._v("在微信开发工具中，切入企业微信开发时，鼠标放入页面后消失。")]),t._v(" "),a("li",[t._v("开发工具在运行企业微信时，切换项目设置-调试基础库版本版本异常。")])]),t._v(" "),a("h5",{attrs:{id:"企业微信授权登录以及获取用户信息问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#企业微信授权登录以及获取用户信息问题"}},[t._v("#")]),t._v(" 企业微信授权登录以及获取用户信息问题：")]),t._v(" "),a("ol",[a("li",[t._v("在企业微信登录中，获取用户信息时，企业微信的jscode2session请求url与微信的不同，后台要做处理。"),a("br"),t._v("\n参考文档：https://work.weixin.qq.com/api/doc/90001/90144/92423")]),t._v(" "),a("li",[t._v("获取企业成员的头像信息兼容。在微信小程序中，直接通过uni.getUserInfo获取，企业微信中，需要专有的api：wx.qy.getAvatar 获取。")])]),t._v(" "),a("h5",{attrs:{id:"其他问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他问题"}},[t._v("#")]),t._v(" 其他问题：")]),t._v(" "),a("ol",[a("li",[t._v("对于较低版本的企业微信，先提示自动更新版本的适配。")]),t._v(" "),a("li",[t._v("配置体验版本时：提示当前小程序已在其他企业关联（目前可能是因为未做关联的原因）。")])]),t._v(" "),a("h3",{attrs:{id:"七-作为第三方服务商发布到应用平台时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七-作为第三方服务商发布到应用平台时"}},[t._v("#")]),t._v(" 七，作为第三方服务商发布到应用平台时：")]),t._v(" "),a("p",[t._v("配置流程比较繁琐，需要服务端评估可行性。"),a("br"),t._v("\n参考文档：https://blog.csdn.net/anyuetiantang/article/details/97516853")]),t._v(" "),a("h3",{attrs:{id:"八-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八-总结"}},[t._v("#")]),t._v(" 八，总结：")]),t._v(" "),a("p",[t._v("微信小程序中大部分功能在企业微信场景中都可以正常使用。针对目前暴露的问题，大部分经过修改以及和服务端配合都可以做好兼容处理。如果能顺利配置并发布到第三方平台，那么使用微信小程序开发企业微信小程序，是一种省时省力，方便快捷的一种可选方案。")])])}),[],!1,null,null,null);a.default=s.exports}}]);